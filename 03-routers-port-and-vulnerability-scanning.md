
# 3. Routers - Port and Vulnerability scanning

To find the IP of your router, you need to know the default gateway on your devices

```
sudo route -n
```

You access a device via a port

The router will have an external IP address (194.187.250.204 - ISP assigned) and it also has an internal IP address (192.168.1.1)

In almost all cases, nonone will be able to make direct connection to your Internet devices via the Internet. This is because of a service called NAT

## NAT - Network Address Translation

Because of NAT, you'd have to specifically configure within the router to forward traffic to a specific device on a specific port, in order for Internet devices to connect to your internal devices

This is often called port forwarding or DMZ

They can communicate back to you because the connection maintain state, as long you have initiate the connection

NAT operates as deny all rule to any attempt to connect to internal devices unless port forwarding is specifically enabled to allow access


## Router

What we call router these days is technically several devices together in one device, although you can have those devices seperate:
- Modem
  - modulate and demodulate a signal so it can be passed on to the local loop of your network carrier
  - works at the physical layer 1, sends photons and electrons on to the Internet
- Router
  - routes traffic from one network to another based on the IP routing table within the router
  - LAN to LAN or LAN to Internet
  - works at Layer 3 and routes IP packages between networks
  - something is a different network when it has a different subnet
- Firewall
  - used to allow and deny traffic based on a set of tools
  - IPTables
  - Works in Transport / Network layers 4 / 3
  - accept and reject traffic based on port protocol and IP address
- Switch
  - where network cables are plugged in
  - keeps a MAC table
  - works on Data Link layer 2
  - has issolated collision domains (cannot sniff)
- Wireless Access Point
  - works similar to the switch but for wireless devices
  - uses the unique MAC addresses of your devices to send traffic
  - works at Data Link layer 2
- (optional) Bridge
    - forwards packets and filters based on MAC address
    - forwards broadcast traffic but not collisions
    - works at data link layer 2

Routers also offer services like 
- DHCP which assigns your IP addresses to your devices
- DNS to resolve domain names into IP addresses
- Port forwarding
- NAT


---

## Ports open in the router

1. Get default gateway 

```
roune -n
```

2. connect via ssh

```
ssh root@192.168.1.1
```


3. Check open ports on the local network (not the Internet, unless DMZ or port forwarding is enabled)

```
netstat -tuln
```

Online tools for port scan: pentest-tools.com, mxtoolbox.com, grc.com

Database of known router vulnerabilities: techmonkeys.co.uk

Vulnerability scanner: Qualys FreeScan

---




